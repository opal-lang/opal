name: Nightly Fuzzing

on:
  schedule:
    - cron: '0 2 * * *'   # 02:00 UTC nightly
  workflow_dispatch:      # Allow manual trigger

concurrency:
  group: ${{ github.workflow }}-${{ github.ref }}
  cancel-in-progress: true

jobs:
  fuzz:
    uses: ./.github/workflows/_fuzz.yml
    with:
      targets: '["FuzzParserDeterminism", "FuzzParserNoPanic", "FuzzParserEventBalance", "FuzzParserMemorySafety", "FuzzParserPathologicalDepth", "FuzzParserErrorRecovery", "FuzzParserWhitespaceInvariance", "FuzzReadPlan"]'
      per_target: "2m"
      race: false
      upload_corpus: true
