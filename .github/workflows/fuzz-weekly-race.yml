name: Weekly Race Fuzzing

on:
  schedule:
    - cron: '0 3 * * 1'   # Mondays 03:00 UTC
  workflow_dispatch:      # Allow manual trigger

concurrency:
  group: ${{ github.workflow }}
  cancel-in-progress: false

jobs:
  fuzz-race:
    uses: ./.github/workflows/_fuzz.yml
    with:
      targets: '["FuzzParserDeterminism", "FuzzParserNoPanic", "FuzzParserEventBalance", "FuzzParserMemorySafety", "FuzzParserPathologicalDepth", "FuzzParserErrorRecovery", "FuzzParserWhitespaceInvariance", "FuzzReadPlan"]'
      per_target: "2m"
      race: true
      upload_corpus: true
